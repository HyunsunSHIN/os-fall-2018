# Post-installation Guide for `snuspl-os-env`

## Preparing Debug Console

### Identifying Serial Device

You can access your device using serial console on ARTIK10. Connect the device to your PC and use the following command to find the device name.

```bash
dmesg | grep tty --color=always | tail
```

The command will highlight the name of the device, such as `ttyUSB0` or `ttyS0`.

### Testing

Execute the following command, like `screen -S $NAME /dev/ttyUSB0 115200 cs8 ixoff` or `screen -S $NAME /dev/ttyS0 115200 cs8 ixoff`.

```bash
screen -S $NAME <DEVICE> 115200 cs8 ixoff
```

Push reset button on ARTIK10 device and then press power button for 1 second. If you can see boot messages on screen, you've found the right device name. Type <kbd>Ctrl</kbd>+<kbd>a</kbd>, <kbd>d</kbd> to close the console.

The command looks too long, isn't it? Setting shell aliases can make your life much easier. [Learn more](https://www.digitalocean.com/community/tutorials/an-introduction-to-useful-bash-aliases-and-functions)

## Commands

Here's the list of commands you can use for kernel development. (Docker users must use this command inside the container.)

[Project 0 documentation](/doc/Project0.md) provides step-by-step guilde for building kernel image and flashing the device. So please don't get overwhelmed by the number of commands. Skimming the list with a light heart is sufficient for doing the Project 0.

`sdb` may not work properly under certain environments, but you can use debug console for accessing shell and USB flash drive to transfer files between ARTIK and your PC. (Note that ARTIK may not properly mount NTFS-formatted drive.)

We recommend setting shell aliases and shorten some commands that you'll use repeatedly during this semester.

### `git`

Git is a version control software. Using git, you can

* download kernel source
* record and publish your changes
* track contributions from other teammates

For documentation about git, visit [here](https://git-scm.com/doc).

### `screen`

Used to open debug console session.

Inside screen session,

* Type <kbd>Ctrl</kbd>+<kbd>a</kbd>, <kbd>d</kbd> to temporary detach screen and return to the shell. You can resume screen by the command `screen`.
* Type <kbd>Ctrl</kbd>+<kbd>a</kbd>, <kbd>k</kbd> and <kbd>y</kbd> to kill the session and return to the shell. You can restart session by the command `screen`.

### `build`

Usage:
```bash
./build image.tar
```

Compiles kernel source and generates `image.tar` in the root directory of kernel source.

The command `./build --clean` cleans source tree and then builds the kernel.

### `lthor`

Usage:
```bash
lthor image.tar
```

Flashes the ARTIK10 device using `image.tar` generated by `build` command.

ARTIK10 device must be in `thordown` mode when using the command.

### `sdb pull`

Usage:
```bash
sdb pull <remote> <local>
```
or
```bash
sdb pull <remote>
```

Copy file or directory from the device. 

 `sdbd` must be running on ARTIK10 device when using the command. [Learn more about sdb](https://developer.tizen.org/development/tizen-studio/web-tools/running-and-testing-your-app/sdb?langredirect=1)

### `sdb push`

Usage:
```bash
sdb push <local> <remote>
```

Copy file or directory to the device.

The command is implemeted using [sdb](https://developer.tizen.org/development/tizen-studio/web-tools/running-and-testing-your-app/sdb?langredirect=1). `sdbd` must be running on ARTIK10 device when using the command. [Learn more about sdb](https://developer.tizen.org/development/tizen-studio/web-tools/running-and-testing-your-app/sdb?langredirect=1)

### `sdb shell`

Usage:
```bash
sdb shell
```

Run remote shell on the device.

Usage:
```bash
shell <command>
```

Run command in the remote shell.

`sdbd` must be running on ARTIK10 device when using the command. [Learn more about sdb](https://developer.tizen.org/development/tizen-studio/web-tools/running-and-testing-your-app/sdb?langredirect=1)

### `sdb root`

Usage:
```bash
sdb -d root on
```

Switch to root account.

Usage:
```bash
sdb -d root off
```

Switch to user account.

`sdbd` must be running on ARTIK10 device when using the command. Account status affects `sdb push`, `sdb pull`, and `sdb shell` commands. [Learn more about sdb](https://developer.tizen.org/development/tizen-studio/web-tools/running-and-testing-your-app/sdb?langredirect=1)

